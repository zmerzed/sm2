<button type="button" onclick="addExer()" class="gray-btn add-exercise">
	Add exercise
</button>

<table id="table-sorter-logs" class="table table-striped table-bordered" style="width:100%">
    <thead>
    <tr>
        <th>Video</th>
        <th>Exercise</th>
        <th>Body Part</th>
        <!-- <th>Categories</th>
        <th>Equipment</th> -->
    </tr>
    </thead>
    <tbody>

    <tr ng-repeat="type in exerciseTypes  | start: (currentPage - 1) * perPage | limitTo: perPage">
        <td><a href="javascript:void(0)" ng-click="modalClick()" ng-repeat="vidID in getVideoID(type.video)"><img src="https://i.ytimg.com/vi/{{vidID}}/maxresdefault.jpg" class="img-responsive img-vid" /></a></td>
        <td>{{ type.type }}</td>
        <td>{{ type.part }}</td>
    </tr>

    </tbody>
</table>
<div id="myModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog" style="top:25%;">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
			</div>
			<div class="modal-body">
				<div class="add-exercise-form" style="display:none;">
					<div class="row">
						<div class="col-lg-5 col-sm-12 pb-2">
							<label>Body Part</label>
						</div>
						<div class="col-lg-7 col-sm-12 pb-2">
							<select name="part" class="form-control body">
								<option value="{{ part }}"  ng-repeat="part in parts track by $index">{{ part }}</option>
								<option value="new-part">Other</option>
							</select>
						</div>	
						<div class="col-lg-5 col-sm-12 pb-2">
							<label>Exercise</label>
						</div>
						<div class="col-lg-7 col-sm-12 pb-2">
							<input name="type" type="text" class="form-control" />
						</div>
						<div class="col-lg-5 col-sm-12 pb-2">
							<label>Variations 1</label>
						</div>
						<div class="col-lg-7 col-sm-12 pb-2">
							<input type="text" />
							<button class="btn-success btn" onclick="addVal(this)">+</button>
							<input name="exercise_1" type="hidden" value='' />
							<div class="exercise_1_values exer-values">
							</div>
						</div>
						<div class="col-lg-5 col-sm-12 pb-2">
							<label>Variations 2</label>
						</div>
						<div class="col-lg-7 col-sm-12 pb-2">
							<input type="text" />
							<button class="btn-success btn" onclick="addVal(this)">+</button>
							<input ng-model="exercise_2" name="exercise_2" type="hidden" value='' />
							<div class="exercise_2_values exer-values">
							</div>
						</div>
						<div class="col-lg-5 col-sm-12 pb-2">
							<label>Implimentation</label>
						</div>
						<div class="col-lg-7 col-sm-12 pb-2">						
							<input type="text" />
							<button class="btn-success btn" onclick="addVal(this)">+</button>
							<input name="implementation_options" type="hidden" value='' />
							<div class="exercise_1_values exer-values">
							</div>
						</div>
						<div class="col-lg-5 col-sm-12 pb-2">
							<label>Youtube Video Link</label>
						</div>
						<div class="col-lg-7 col-sm-12 pb-2">
							<input placeholder="ex. https://youtu.be/-614qJJQtGQ" type="text" class="form-control" />
						</div>
						<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 pt-5">
							<button class="btn-danger btn float-right">Add Exercise</button>
						</div>
					</div>
				</div>
				<iframe width="100%" height="300" frameborder="0" allowfullscreen=""></iframe>
			</div>
		</div>
	</div>
</div>

<uib-pagination total-items="577 * 2" items-per-page="20" next-text="Next" previous-text="Previous" ng-model="currentPage" max-size="maxSize" class="pagination-sm" boundary-link-numbers="true"></uib-pagination>


<script>
	function addExer(){
		$('#myModal').modal();
		$('.add-exercise-form').show();
		$('.modal-body iframe').hide();
	}
	function removeA(arr) {
		var what, a = arguments, L = a.length, ax;
		while (L > 1 && arr.length) {
			what = a[--L];
			while ((ax= arr.indexOf(what)) !== -1) {
				arr.splice(ax, 1);
			}
		}
		return arr;
	}
	function addVal(a){
		var parent = $(a).closest('div'),
		thisArr = $(parent).find('input[type="hidden"]'),
		varSrc = $(parent).find('input[type="text"]'),
		valAdded = $(varSrc).val(),
		targetVal = $(parent).find('.exer-values'),
		addOption = '<label>'+valAdded+' <button onclick="removeVal(this, \''+valAdded+'\')">x</button>'+'</label>',
		curVal = [];
		
		if($(thisArr).val() != "")
			curVal = JSON.parse($(thisArr).val());
		
		if(valAdded != ""){		
			$(targetVal).append(addOption);
			curVal.push(valAdded);
			console.log(curVal.join());
			$(thisArr).val(JSON.stringify(curVal));
			$(varSrc).val('');
		}else
			$(varSrc).attr('placeholder', 'Enter here').focus();
	}
	function removeVal(a,b){			
		var thisArr = $(a).closest('.pb-2').find('input[type="hidden"]'),		
		curVal = JSON.parse($(thisArr).val());
		curVal = removeA(curVal,b);		
		$(thisArr).val(JSON.stringify(curVal));	
		$(a).closest('label').remove();
		console.log(curVal);
	}
</script>